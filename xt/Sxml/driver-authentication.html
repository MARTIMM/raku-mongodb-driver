<html><head><title>Driver Authentication</title><meta charset="UTF-8"/><link rel="stylesheet" href="file:///home/marcel/Languages/Perl6/Projects/mongo-perl6-driver/../Semi-xml/resources/google-code-prettify/prettify.css" type="text/css"/><script type="text/javascript" src="file:///home/marcel/Languages/Perl6/Projects/mongo-perl6-driver/../Semi-xml/resources/google-code-prettify/prettify.js"> </script><link rel="stylesheet" href="file:///home/marcel/Languages/Perl6/Projects/mongo-perl6-driver/../Semi-xml/resources/report.css" type="text/css"/></head><body onload="prettyPrint()"><h1 id="___top" class="title">Driver Authentication</h1><h2>Abstract</h2><p>MongoDB supports various authentication strategies across various versions. When authentication is turned on in the database, a driver must authenticate before it is allowed to communicate with the server. This spec defines when and how a driver performs authentication with a MongoDB server.
</p><p>This report is following a specification from the <a href="https://github.com/mongodb/specifications/blob/master/source/auth/auth.rst">Mongodb
</a> website and is shown below.
</p><h2>Mongo credential</h2><p>Drivers SHOULD contain a type called MongoCredential. In this driver it is called <code>MongoDB::Authenticate::Credential</code>.
</p><pre class="prettyprint lang-perl6 linenums">use MongoDB::Authenticate::Credential;
my MongoDB::Authenticate::Credential $cred .= new(
  :username&lt;user>, :password&lt;pencil>,
  :auth-mechanism&lt;SCRAM-SHA-1>
);
ok $cred.defined, 'T0';
is $cred.password, "pencil", 'T1';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T0: </b>Credential is defined. Not all named arguments are used. There are also :source and :mechanism-properties. Btw. the field mechanism is named auth-mechanism because of the name authMechanism used in the url as an option.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T1: </b>Data can also be retrieved from it again.
</td></tr></table><hook/><pre class="prettyprint lang-perl6 linenums:8">use lib 't';
use Test-support;
use MongoDB::Client;
my MongoDB::Test-support $ts .= new;
my Int $p1 = $ts.server-control.get-port-number('s1');
my MongoDB::Client $client .= new(:uri("mongodb://localhost:$p1"));
ok $client.defined, 'T2';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T2: </b>Returned client object is defined, even when the uri is not pointing to an existing mongod server.
</td></tr></table><table><tr><th>Normal tests</th><th>Bug issues</th><th>Todo tests</th><th>Summary</th></tr><tr><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="150"><path d="M 50 50 l 0 -47A 47 47 0 1 1 49.99 3z" class="test-ok"/><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="test-nok"/></g><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="test-ok" width="15"/><text x="20" y="10" class="legend">3</text><rect x="0" height="10" y="15" class="test-nok" width="15"/><text x="20" y="25" class="legend">0</text><path d="M 0 28 H 40" class="line"/><text x="20" y="40" class="legend">3</text></g></svg></td><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="150"><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="bug-ok" width="15"/><text x="20" y="10" class="legend">0</text><rect x="0" height="10" y="15" class="bug-nok" width="15"/><text x="20" y="25" class="legend">0</text><path d="M 0 28 H 40" class="line"/><text x="20" y="40" class="legend">0</text></g></svg></td><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="150"><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="todo-ok" width="15"/><text x="20" y="10" class="legend">0</text><rect x="0" height="10" y="15" class="todo-nok" width="15"/><text x="20" y="25" class="legend">0</text><path d="M 0 28 H 40" class="line"/><text x="20" y="40" class="legend">0</text></g></svg></td><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="200"><path d="M 50 50 l 0 -47A 47 47 0 1 1 49.99 3z" class="test-ok"/><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="test-nok"/></g><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="bug-nok"/></g><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="todo-nok"/></g><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="skip"/></g><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="test-ok" width="15"/><text x="20" y="10" class="legend">3</text><text x="40" y="10" class="legend">ok</text><rect x="0" height="10" y="15" class="test-nok" width="15"/><text x="20" y="25" class="legend">0</text><text x="40" y="25" class="legend">Tests</text><rect x="0" height="10" y="30" class="bug-nok" width="15"/><text x="20" y="40" class="legend">0</text><text x="40" y="40" class="legend">Bugs</text><rect x="0" height="10" y="45" class="todo-nok" width="15"/><text x="20" y="55" class="legend">0</text><text x="40" y="55" class="legend">Todo</text><rect x="0" height="10" y="60" class="skip" width="15"/><text x="20" y="70" class="legend">0</text><text x="40" y="70" class="legend">Skip</text><path d="M 0 73 H 80" class="line"/><text x="20" y="85" class="legend">3</text><text x="40" y="85" class="legend">Total</text></g></svg></td></tr></table><div class="footer">Generated using SemiXML, SxmlLib::Testing::*, XML, &copy;Google prettify</div></body></html>