<!DOCTYPE html>
  <html>
    <head>
      <title>Design-software</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/marcel/.atom/packages/markdown-preview-enhanced/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      

      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;padding:2em;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}@media screen and (min-width:914px){html body:not([data-presentation-mode]){width:980px;margin:10px auto}}@media screen and (max-width:400px){html body:not([data-presentation-mode]){font-size:14px;margin:0 auto;padding:15px}}html body .pagebreak,html body .newpage{page-break-before:always}html body pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}html body pre.line-numbers>code{position:relative}html body pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html body pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}html body pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}html body .mathjax-exps .MathJax_Display{text-align:center !important}html body:not([for="preview"]) .code-chunk .btn-group{display:none}html body:not([for="preview"]) .code-chunk .status{display:none}html body:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px} 
       
      </style>
    </head>
    <body class="mume   ">
    <h1 class="mume-header" id="design-document">Design document</h1>

<p>This project did not start by sitting back and design things first. I Can't tell if Pawel did, it was a good and obvious setup when I took over. But later when things went complex using concurrency it was necessary to make some drawings to show how things are connected. The user however can get by by digesting the most simple diagrams because this is how it feels to the user.</p>
<p>Me, on the other hand, and later people who take over the project, need some diagrams to see how the objects interact with each other and to remember later how and why things were done that way.</p>
<h2 class="mume-header" id="users-view-of-the-package">Users view of the package</h2>

<p>First a class diagram where the obvious classes are noted.</p>
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="173px" preserveAspectRatio="none" style="width:446px;height:173px;" version="1.1" viewBox="0 0 446 173" width="446px" zoomAndPan="magnify"><defs><filter height="300%" id="f1h5hv32drnk3a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><!--class UP--><rect fill="#FEFECE" filter="url(#f1h5hv32drnk3a)" height="48" id="UP" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="234.5" y="8"></rect><ellipse cx="249.5" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M252.4688,29.6406 Q251.8906,29.9375 251.25,30.0859 Q250.6094,30.2344 249.9063,30.2344 Q247.4063,30.2344 246.0859,28.5859 Q244.7656,26.9375 244.7656,23.8125 Q244.7656,20.6875 246.0859,19.0313 Q247.4063,17.375 249.9063,17.375 Q250.6094,17.375 251.2578,17.5313 Q251.9063,17.6875 252.4688,17.9844 L252.4688,20.7031 Q251.8438,20.125 251.25,19.8516 Q250.6563,19.5781 250.0313,19.5781 Q248.6875,19.5781 248,20.6484 Q247.3125,21.7188 247.3125,23.8125 Q247.3125,25.9063 248,26.9766 Q248.6875,28.0469 250.0313,28.0469 Q250.6563,28.0469 251.25,27.7734 Q251.8438,27.5 252.4688,26.9219 L252.4688,29.6406 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="263.5" y="28.1543">User::Program</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="235.5" x2="355.5" y1="40" y2="40"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="235.5" x2="355.5" y1="48" y2="48"></line><!--class Cl--><rect fill="#FEFECE" filter="url(#f1h5hv32drnk3a)" height="48" id="Cl" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="262" y="116"></rect><ellipse cx="277" cy="132" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M279.9688,137.6406 Q279.3906,137.9375 278.75,138.0859 Q278.1094,138.2344 277.4063,138.2344 Q274.9063,138.2344 273.5859,136.5859 Q272.2656,134.9375 272.2656,131.8125 Q272.2656,128.6875 273.5859,127.0313 Q274.9063,125.375 277.4063,125.375 Q278.1094,125.375 278.7578,125.5313 Q279.4063,125.6875 279.9688,125.9844 L279.9688,128.7031 Q279.3438,128.125 278.75,127.8516 Q278.1563,127.5781 277.5313,127.5781 Q276.1875,127.5781 275.5,128.6484 Q274.8125,129.7188 274.8125,131.8125 Q274.8125,133.9063 275.5,134.9766 Q276.1875,136.0469 277.5313,136.0469 Q278.1563,136.0469 278.75,135.7734 Q279.3438,135.5 279.9688,134.9219 L279.9688,137.6406 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="35" x="291" y="136.1543">Client</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="263" x2="328" y1="148" y2="148"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="263" x2="328" y1="156" y2="156"></line><!--class Da--><rect fill="#FEFECE" filter="url(#f1h5hv32drnk3a)" height="48" id="Da" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="134" y="116"></rect><ellipse cx="149" cy="132" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M151.9688,137.6406 Q151.3906,137.9375 150.75,138.0859 Q150.1094,138.2344 149.4063,138.2344 Q146.9063,138.2344 145.5859,136.5859 Q144.2656,134.9375 144.2656,131.8125 Q144.2656,128.6875 145.5859,127.0313 Q146.9063,125.375 149.4063,125.375 Q150.1094,125.375 150.7578,125.5313 Q151.4063,125.6875 151.9688,125.9844 L151.9688,128.7031 Q151.3438,128.125 150.75,127.8516 Q150.1563,127.5781 149.5313,127.5781 Q148.1875,127.5781 147.5,128.6484 Q146.8125,129.7188 146.8125,131.8125 Q146.8125,133.9063 147.5,134.9766 Q148.1875,136.0469 149.5313,136.0469 Q150.1563,136.0469 150.75,135.7734 Q151.3438,135.5 151.9688,134.9219 L151.9688,137.6406 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="163" y="136.1543">Database</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="135" x2="226" y1="148" y2="148"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="135" x2="226" y1="156" y2="156"></line><!--class Co--><rect fill="#FEFECE" filter="url(#f1h5hv32drnk3a)" height="48" id="Co" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="6" y="116"></rect><ellipse cx="21" cy="132" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M23.9688,137.6406 Q23.3906,137.9375 22.75,138.0859 Q22.1094,138.2344 21.4063,138.2344 Q18.9063,138.2344 17.5859,136.5859 Q16.2656,134.9375 16.2656,131.8125 Q16.2656,128.6875 17.5859,127.0313 Q18.9063,125.375 21.4063,125.375 Q22.1094,125.375 22.7578,125.5313 Q23.4063,125.6875 23.9688,125.9844 L23.9688,128.7031 Q23.3438,128.125 22.75,127.8516 Q22.1563,127.5781 21.5313,127.5781 Q20.1875,127.5781 19.5,128.6484 Q18.8125,129.7188 18.8125,131.8125 Q18.8125,133.9063 19.5,134.9766 Q20.1875,136.0469 21.5313,136.0469 Q22.1563,136.0469 22.75,135.7734 Q23.3438,135.5 23.9688,134.9219 L23.9688,137.6406 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="35" y="136.1543">Collection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="98" y1="148" y2="148"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="98" y1="156" y2="156"></line><!--class Cu--><rect fill="#FEFECE" filter="url(#f1h5hv32drnk3a)" height="48" id="Cu" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="364" y="116"></rect><ellipse cx="379" cy="132" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M381.9688,137.6406 Q381.3906,137.9375 380.75,138.0859 Q380.1094,138.2344 379.4063,138.2344 Q376.9063,138.2344 375.5859,136.5859 Q374.2656,134.9375 374.2656,131.8125 Q374.2656,128.6875 375.5859,127.0313 Q376.9063,125.375 379.4063,125.375 Q380.1094,125.375 380.7578,125.5313 Q381.4063,125.6875 381.9688,125.9844 L381.9688,128.7031 Q381.3438,128.125 380.75,127.8516 Q380.1563,127.5781 379.5313,127.5781 Q378.1875,127.5781 377.5,128.6484 Q376.8125,129.7188 376.8125,131.8125 Q376.8125,133.9063 377.5,134.9766 Q378.1875,136.0469 379.5313,136.0469 Q380.1563,136.0469 380.75,135.7734 Q381.3438,135.5 381.9688,134.9219 L381.9688,137.6406 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="41" x="393" y="136.1543">Cursor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="365" x2="436" y1="148" y2="148"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="365" x2="436" y1="156" y2="156"></line><!--link UP to Cl--><path d="M295.5,69.3383 C295.5,80.0064 295.5,91.6772 295.5,102.3638 " fill="none" id="UP-Cl" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="295.5,115.6784,299.5,106.6784,295.5,110.6784,291.5,106.6784,295.5,115.6784" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="295.5" x2="295.5" y1="110.6784" y2="102.6785"></line><polygon fill="#A80036" points="295.5,56,291.5,62,295.5,68,299.5,62,295.5,56" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--link Da to Cl--><path d="M227.219,140 C237.061,140 246.904,140 256.746,140 " fill="none" id="Da-Cl" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="261.893,140,252.893,136,256.893,140,252.893,144,261.893,140" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--link Co to Da--><path d="M99.5,140 C109.29,140 119.079,140 128.869,140 " fill="none" id="Co-Da" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="133.988,140,124.988,136,128.988,140,124.988,144,133.988,140" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--link Cl to Cu--><path d="M334.305,140 C344.197,140 354.089,140 363.98,140 " fill="none" id="Cl-Cu" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="329.133,140,338.133,144,334.133,140,338.133,136,329.133,140" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--
@startuml
class UP as "User::Program"

class Cl as "Client" {
}

class Da as "Database" {
}

class Co as "Collection" {
}

class Cu as "Cursor" {
}

'class W as "Wire" {}

'class S as "Server" {}


UP *- -> Cl
'Cl *- -> S
'S - -> Cl
Da -> Cl
Co -> Da
'Co - -> W
'W -> S

Cl <- Cu
'S <- - Cu
@enduml

PlantUML version 1.2017.13(Wed May 10 18:52:33 CEST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_141-b16
Operating System: Linux
OS Version: 4.11.12-100.fc24.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></p>
<p>The user can use the classes mostly in one of the two following ways;</p>
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="301px" preserveAspectRatio="none" style="width:391px;height:301px;" version="1.1" viewBox="0 0 391 301" width="391px" zoomAndPan="magnify"><defs><filter height="300%" id="fikn6kkhig811" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="339" x="27.75" y="22.9951">"Using run-command to insert, update etc"</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="68.5938" y2="263.3906"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="263.5" x2="263.5" y1="68.5938" y2="263.3906"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="344.5" x2="344.5" y1="68.5938" y2="263.3906"></line><rect fill="#FEFECE" filter="url(#fikn6kkhig811)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="8" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="15" y="53.292">User::Program</text><rect fill="#FEFECE" filter="url(#fikn6kkhig811)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="8" y="262.3906"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="15" y="282.3857">User::Program</text><rect fill="#FEFECE" filter="url(#fikn6kkhig811)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="235.5" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="242.5" y="53.292">Client</text><rect fill="#FEFECE" filter="url(#fikn6kkhig811)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="235.5" y="262.3906"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="242.5" y="282.3857">Client</text><rect fill="#FEFECE" filter="url(#fikn6kkhig811)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="302.5" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="309.5" y="53.292">Database</text><rect fill="#FEFECE" filter="url(#fikn6kkhig811)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="302.5" y="262.3906"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="309.5" y="282.3857">Database</text><polygon fill="#A80036" points="252,95.5938,262,99.5938,252,103.5938,256,99.5938" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="258" y1="99.5938" y2="99.5938"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="74" y="94.6606">MongoDB::Client.new(:$uri)</text><polygon fill="#A80036" points="78,124.7266,68,128.7266,78,132.7266,74,128.7266" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="263" y1="128.7266" y2="128.7266"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="84" y="123.7935">$client</text><polygon fill="#A80036" points="252,153.8594,262,157.8594,252,161.8594,256,157.8594" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="258" y1="157.8594" y2="157.8594"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="74" y="152.9263">$client.database($name)</text><polygon fill="#A80036" points="78,182.9922,68,186.9922,78,190.9922,74,186.9922" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="263" y1="186.9922" y2="186.9922"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="84" y="182.0591">$database</text><polygon fill="#A80036" points="332.5,212.125,342.5,216.125,332.5,220.125,336.5,216.125" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="338.5" y1="216.125" y2="216.125"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="74" y="211.1919">$database.run-command($command)</text><polygon fill="#A80036" points="78,241.2578,68,245.2578,78,249.2578,74,245.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="343.5" y1="245.2578" y2="245.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="84" y="240.3247">$document</text><!--
@startuml
title "Using run-command to insert, update etc"

participant UP as "User::Program"
participant Cl as "Client"
participant Da as "Database"
'participant Co as "Collection"

UP -> Cl : MongoDB::Client.new(:$uri)
Cl -> UP : $client
UP -> Cl : $client.database($name)
Cl -> UP : $database
UP -> Da : $database.run-command($command)
Da -> UP : $document
@enduml

PlantUML version 1.2017.13(Wed May 10 18:52:33 CEST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_141-b16
Operating System: Linux
OS Version: 4.11.12-100.fc24.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></p>
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="418px" preserveAspectRatio="none" style="width:561px;height:418px;" version="1.1" viewBox="0 0 561 418" width="561px" zoomAndPan="magnify"><defs><filter height="300%" id="frnanbvkurdo0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="312" x="126.25" y="22.9951">"Searching for information in database"</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="68.5938" y2="379.9219"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="263.5" x2="263.5" y1="68.5938" y2="379.9219"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="344.5" x2="344.5" y1="68.5938" y2="379.9219"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="439.5" x2="439.5" y1="68.5938" y2="379.9219"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="524.5" x2="524.5" y1="68.5938" y2="379.9219"></line><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="8" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="15" y="53.292">User::Program</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="8" y="378.9219"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="15" y="398.917">User::Program</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="235.5" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="242.5" y="53.292">Client</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="235.5" y="378.9219"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="242.5" y="398.917">Client</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="302.5" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="309.5" y="53.292">Database</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="302.5" y="378.9219"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="309.5" y="398.917">Database</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="396.5" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="403.5" y="53.292">Collection</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="396.5" y="378.9219"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="403.5" y="398.917">Collection</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="492.5" y="33.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="499.5" y="53.292">Cursor</text><rect fill="#FEFECE" filter="url(#frnanbvkurdo0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="492.5" y="378.9219"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="499.5" y="398.917">Cursor</text><polygon fill="#A80036" points="252,95.5938,262,99.5938,252,103.5938,256,99.5938" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="258" y1="99.5938" y2="99.5938"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="74" y="94.6606">MongoDB::Client.new(:$uri)</text><polygon fill="#A80036" points="78,124.7266,68,128.7266,78,132.7266,74,128.7266" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="263" y1="128.7266" y2="128.7266"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="84" y="123.7935">$client</text><polygon fill="#A80036" points="252,153.8594,262,157.8594,252,161.8594,256,157.8594" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="258" y1="157.8594" y2="157.8594"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="74" y="152.9263">$client.database($name)</text><polygon fill="#A80036" points="78,182.9922,68,186.9922,78,190.9922,74,186.9922" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="263" y1="186.9922" y2="186.9922"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="84" y="182.0591">$database</text><polygon fill="#A80036" points="332.5,212.125,342.5,216.125,332.5,220.125,336.5,216.125" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="338.5" y1="216.125" y2="216.125"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="74" y="211.1919">$database.collection($name)</text><polygon fill="#A80036" points="78,241.2578,68,245.2578,78,249.2578,74,245.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="343.5" y1="245.2578" y2="245.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="84" y="240.3247">$collection</text><polygon fill="#A80036" points="427.5,270.3906,437.5,274.3906,427.5,278.3906,431.5,274.3906" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="433.5" y1="274.3906" y2="274.3906"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="74" y="269.4575">$collection.find($criteria,$projection)</text><polygon fill="#A80036" points="78,299.5234,68,303.5234,78,307.5234,74,303.5234" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="438.5" y1="303.5234" y2="303.5234"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="84" y="298.5903">$cursor</text><polygon fill="#A80036" points="512.5,328.6563,522.5,332.6563,512.5,336.6563,516.5,332.6563" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="518.5" y1="332.6563" y2="332.6563"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="74" y="327.7231">$cursor.fetch</text><polygon fill="#A80036" points="78,357.7891,68,361.7891,78,365.7891,74,361.7891" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="523.5" y1="361.7891" y2="361.7891"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="84" y="356.856">$document</text><!--
@startuml
title "Searching for information in database"

participant UP as "User::Program"
participant Cl as "Client"
participant Da as "Database"
participant Co as "Collection"
participant Cu as "Cursor"

UP -> Cl : MongoDB::Client.new(:$uri)
Cl -> UP : $client
UP -> Cl : $client.database($name)
Cl -> UP : $database
UP -> Da : $database.collection($name)
Da -> UP : $collection
UP -> Co : $collection.find($criteria,$projection)
Co -> UP : $cursor
UP -> Cu : $cursor.fetch
Cu -> UP : $document
@enduml

PlantUML version 1.2017.13(Wed May 10 18:52:33 CEST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_141-b16
Operating System: Linux
OS Version: 4.11.12-100.fc24.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></p>
<p><?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg class="marks" width="436" height="240" viewBox="0 0 436 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(31,16)"><g class="mark-group role-frame root"><g transform="translate(0,0)"><path class="background" d="M0,0h400v200h-400Z" style="fill: none;"></path><g><g class="mark-group role-axis"><g transform="translate(0.5,200.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-tick" style="pointer-events: none;"><line transform="translate(28,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(77,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(126,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(175,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(224,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(273,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(322,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(371,0)" x2="0" y2="5" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line></g><g class="mark-text role-axis-label" style="pointer-events: none;"><text text-anchor="middle" transform="translate(27.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">A</text><text text-anchor="middle" transform="translate(76.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">B</text><text text-anchor="middle" transform="translate(125.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">C</text><text text-anchor="middle" transform="translate(174.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">D</text><text text-anchor="middle" transform="translate(223.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">E</text><text text-anchor="middle" transform="translate(272.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">F</text><text text-anchor="middle" transform="translate(321.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">G</text><text text-anchor="middle" transform="translate(370.5,16)" style="font: 10px sans-serif; fill: #000; opacity: 1;">H</text></g><g class="mark-rule role-axis-domain" style="pointer-events: none;"><line transform="translate(0,0)" x2="400" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line></g></g></g></g><g class="mark-group role-axis"><g transform="translate(0.5,0.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-tick" style="pointer-events: none;"><line transform="translate(0,200)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,180)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,160)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,140)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,120)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,100)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,80)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,60)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,40)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,20)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,0)" x2="-5" y2="0" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line></g><g class="mark-text role-axis-label" style="pointer-events: none;"><text text-anchor="end" transform="translate(-7,203)" style="font: 10px sans-serif; fill: #000; opacity: 1;">0</text><text text-anchor="end" transform="translate(-7,183)" style="font: 10px sans-serif; fill: #000; opacity: 1;">10</text><text text-anchor="end" transform="translate(-7,163)" style="font: 10px sans-serif; fill: #000; opacity: 1;">20</text><text text-anchor="end" transform="translate(-7,143)" style="font: 10px sans-serif; fill: #000; opacity: 1;">30</text><text text-anchor="end" transform="translate(-7,123)" style="font: 10px sans-serif; fill: #000; opacity: 1;">40</text><text text-anchor="end" transform="translate(-7,103)" style="font: 10px sans-serif; fill: #000; opacity: 1;">50</text><text text-anchor="end" transform="translate(-7,83)" style="font: 10px sans-serif; fill: #000; opacity: 1;">60</text><text text-anchor="end" transform="translate(-7,63)" style="font: 10px sans-serif; fill: #000; opacity: 1;">70</text><text text-anchor="end" transform="translate(-7,43)" style="font: 10px sans-serif; fill: #000; opacity: 1;">80</text><text text-anchor="end" transform="translate(-7,23)" style="font: 10px sans-serif; fill: #000; opacity: 1;">90</text><text text-anchor="end" transform="translate(-7,3)" style="font: 10px sans-serif; fill: #000; opacity: 1;">100</text></g><g class="mark-rule role-axis-domain" style="pointer-events: none;"><line transform="translate(0,200)" x2="0" y2="-200" style="fill: none; stroke: #000; stroke-width: 1; opacity: 1;"></line></g></g></g></g><g class="mark-rect role-mark"><path d="M5,144h47v56h-47Z" style="fill: steelblue;"></path><path d="M54,89.99999999999999h47v110.00000000000001h-47Z" style="fill: steelblue;"></path><path d="M103,114h47v86h-47Z" style="fill: steelblue;"></path><path d="M152,18h47v182h-47Z" style="fill: steelblue;"></path><path d="M201,38h47v162h-47Z" style="fill: steelblue;"></path><path d="M250,94h47v106h-47Z" style="fill: steelblue;"></path><path d="M299,162h47v38h-47Z" style="fill: steelblue;"></path><path d="M348,26h47v174h-47Z" style="fill: steelblue;"></path></g><g class="mark-text role-mark"><text text-anchor="middle" transform="translate(0,-2)" style="font: 11px sans-serif; fill: #333; fill-opacity: 1;"></text></g></g></g></g></g></svg></p>

    </body>
    
    
    <script>
(function bindTaskListEvent() {
  var taskListItemCheckboxes = document.body.getElementsByClassName('task-list-item-checkbox')
  for (var i = 0; i < taskListItemCheckboxes.length; i++) {
    var checkbox = taskListItemCheckboxes[i]
    var li = checkbox.parentElement
    if (li.tagName !== 'LI') li = li.parentElement
    if (li.tagName === 'LI') {
      li.classList.add('task-list-item')
    }
  }
}())    
</script>
  </html>