<html><head><title>Connection String URI Format</title><meta charset="UTF-8"/><link rel="stylesheet" href="file:///home/marcel/Languages/Perl6/Projects/mongo-perl6-driver/../Semi-xml/resources/google-code-prettify/prettify.css" type="text/css"/><script type="text/javascript" src="file:///home/marcel/Languages/Perl6/Projects/mongo-perl6-driver/../Semi-xml/resources/google-code-prettify/prettify.js"> </script><link rel="stylesheet" href="file:///home/marcel/Languages/Perl6/Projects/mongo-perl6-driver/../Semi-xml/resources/report.css" type="text/css"/></head><body onload="prettyPrint()"><h1 id="___top" class="title">Connection String URI Format</h1><h2>Standard Connection String Format</h2><p>This section describes the standard format of the MongoDB connection URI used to connect to a MongoDB database server. The format is the same for all official MongoDB drivers. For a list of drivers and links to driver documentation, see MongoDB Drivers and Client Libraries. The following is the standard URI connection scheme:
</p><p><code>mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]</code></p><pre class="prettyprint lang-perl6 linenums">use MongoDB::Uri;
my MongoDB::Uri $uri-obj .= new(:uri&lt;mongodb://localhost>);
ok $uri-obj.defined, 'T0';
is $uri-obj.server-data&lt;servers>[0]&lt;host>, "localhost", 'T1';
is $uri-obj.server-data&lt;servers>[0]&lt;port>, 27017, 'T2';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T0: </b></td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T1: </b>default server name
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T2: </b>default port number
</td></tr></table><hook/><p1>In the specification shown above it is necessary to specify at least one host and when there are more, all of these must be defined. In this driver implementation however, it is not necessary when host is <code>localhost</code>. So for this driver it is;
</p1><p><code>
      mongodb://[username:password@][host1][:port1],...[,[hostN][:portN]][/[database][?options]]</code></p><pre class="prettyprint lang-perl6 linenums:6">$uri-obj .= new(:uri&lt;mongodb://>);
is $uri-obj.server-data&lt;servers>[0]&lt;host>, "localhost", 'T3';
is $uri-obj.server-data&lt;servers>[0]&lt;port>, 27017, 'T4';
$uri-obj .= new(:uri&lt;mongodb://,,,>);
ok $uri-obj.server-data&lt;servers>[1]&lt;host>:!exists, 'T5';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T3: </b>All is brought back to bare protocol specification and we get
 <code>localhost</code>.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T4: </b>and its default port number <code>27017</code>.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T5: </b>No mather how many comma's are used to separate host specifications. So here there is no second host <code>localhost:27017</code>.
</td></tr></table><hook/><h2>Username and password</h2><pre class="prettyprint lang-perl6 linenums:11">$uri-obj .= new(:uri&lt;mongodb://user:pencil@>);
is $uri-obj.server-data&lt;username>, "user", 'T6';
is $uri-obj.server-data&lt;password>, "pencil", 'T7';
dies-ok { $uri-obj .= new(:uri&lt;mongodb://user:@>); }
, 'T8';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T6: </b>Username found in uri is <code>user</code>.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T7: </b>Password found in uri is <code>pencil</code>.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T8: </b>It is not correct to specify the username without its password.
</td></tr></table><hook/><h2>Database</h2><pre class="prettyprint lang-perl6 linenums:16">$uri-obj .= new(:uri&lt;mongodb://>);
is $uri-obj.server-data&lt;database>, "admin", 'T9';
$uri-obj .= new(:uri&lt;mongodb:///contacts>);
is $uri-obj.server-data&lt;database>, "contacts", 'T10';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T9: </b>Default database is <code>admin</code>.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T10: </b>User defined database is <code>contacts</code>.
</td></tr></table><hook/><h2>Options</h2><pre class="prettyprint lang-perl6 linenums:20">$uri-obj .= new(:uri&lt;mongodb://:65000/?replicaSet=test&amp;authMechanism=SCRAM-SHA-1>);
is $uri-obj.server-data&lt;options>&lt;replicaSet>, "test", 'T11';
is $uri-obj.server-data&lt;options>&lt;authMechanism>, "SCRAM-SHA-1", 'T12';
</pre><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T11: </b>Option replicaSet is <code>test</code>.
</td></tr></table><table class="test-table"><tr><td class="check-mark green">&#10004;</td><td class="test-comment"><b>T12: </b>Option authMechanism is <code>SCRAM-SHA-1</code>.
</td></tr></table><table><tr><th>Normal tests</th><th>Bug issues</th><th>Todo tests</th><th>Summary</th></tr><tr><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="150"><path d="M 50 50 l 0 -47A 47 47 0 1 1 49.99 3z" class="test-ok"/><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="test-nok"/></g><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="test-ok" width="15"/><text x="20" y="10" class="legend">13</text><rect x="0" height="10" y="15" class="test-nok" width="15"/><text x="20" y="25" class="legend">0</text><path d="M 0 28 H 40" class="line"/><text x="20" y="40" class="legend">13</text></g></svg></td><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="150"><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="bug-ok" width="15"/><text x="20" y="10" class="legend">0</text><rect x="0" height="10" y="15" class="bug-nok" width="15"/><text x="20" y="25" class="legend">0</text><path d="M 0 28 H 40" class="line"/><text x="20" y="40" class="legend">0</text></g></svg></td><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="150"><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="todo-ok" width="15"/><text x="20" y="10" class="legend">0</text><rect x="0" height="10" y="15" class="todo-nok" width="15"/><text x="20" y="25" class="legend">0</text><path d="M 0 28 H 40" class="line"/><text x="20" y="40" class="legend">0</text></g></svg></td><td><svg height="100" xmlns="http://www.w3.org/2000/svg" width="200"><path d="M 50 50 l 0 -47A 47 47 0 1 1 49.99 3z" class="test-ok"/><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="test-nok"/></g><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="bug-nok"/></g><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="todo-nok"/></g><g transform="rotate( 360, 50, 50)"><path d="M 50 50 l 0 -47A 47 47 0 0 1 50 3z" class="skip"/></g><g transform="translate(100,5)"><rect x="0" height="10" y="0" class="test-ok" width="15"/><text x="20" y="10" class="legend">13</text><text x="40" y="10" class="legend">ok</text><rect x="0" height="10" y="15" class="test-nok" width="15"/><text x="20" y="25" class="legend">0</text><text x="40" y="25" class="legend">Tests</text><rect x="0" height="10" y="30" class="bug-nok" width="15"/><text x="20" y="40" class="legend">0</text><text x="40" y="40" class="legend">Bugs</text><rect x="0" height="10" y="45" class="todo-nok" width="15"/><text x="20" y="55" class="legend">0</text><text x="40" y="55" class="legend">Todo</text><rect x="0" height="10" y="60" class="skip" width="15"/><text x="20" y="70" class="legend">0</text><text x="40" y="70" class="legend">Skip</text><path d="M 0 73 H 80" class="line"/><text x="20" y="85" class="legend">13</text><text x="40" y="85" class="legend">Total</text></g></svg></td></tr></table><div class="footer">Generated using SemiXML, SxmlLib::Testing::*, XML, &copy;Google prettify</div></body></html>